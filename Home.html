<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Typing Exercises Manager</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
body { font-family: 'Bookman Old Style', serif; margin: 0; background: #f8f9fa; }
nav { background: #00295f; padding: 10px 20px;}
nav ul { list-style: none; margin: 0; padding: 0; display: flex; align-items: center; }
nav ul li { margin-right: 20px; }
nav ul li a, nav ul li button { color: white; font-weight: bold; text-decoration: none; background: transparent; border: none; font-size: 16px; cursor: pointer; }
nav ul li a:hover, nav ul li button:hover { color: #ffce00; }
.header { display: flex; justify-content: space-between; padding: 10px 20px; align-items: center; }
header img { height: 80px; }
.container { width: 90%; margin: 20px auto; }
.card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0px 0px 10px rgba(0,0,0,0.15); margin-bottom: 20px; }
.card h2 { color: #00295f; border-left: 6px solid #00295f; padding-left: 10px; }
textarea, input { width: 100%; padding: 8px; margin-top: 6px; border-radius: 6px; border: 1px solid #ccc; }
button { margin-top: 8px; padding: 8px 14px; border: none; background: black; color: white; border-radius: 5px; cursor: pointer; }
button:hover { background: black; }
.delete-btn { background: #d40000; } .delete-btn:hover { background: #9b0000; }
.hidden { display: none; }
#loginModal { display: none; position: fixed; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; }
.modal-content { background: white; padding: 20px; border-radius: 5px; text-align: center; }

/* ===== Transparent Intro Styles ===== */
#intro-screen {
  position: fixed;
  inset: 0;
  background: transparent; /* no background at all */
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  overflow: hidden;
  z-index: 9999;
  animation: fadeOut 3s ease 2.8s forwards; /* fades away after 3s */
  pointer-events: none; /* allows clicking elements below */
}
.intro-text {
  font-family: 'Bookman Old Style', serif;
  font-size: 2.2rem;
  color: #00295f;
  text-shadow: 0 2px 10px rgba(0,0,0,0.15);
  position: relative;
  z-index: 2;
  animation: fadeInText 1s ease-in-out;
}
/* Floating letters */
.letters-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.letter {
  position: absolute;
  color: #D4AF37;
  opacity: 0.8;
  font-family: 'Bookman Old Style', serif;
  animation: floatLetters 3s linear forwards;
  user-select: none;
}
/* ===== Animations ===== */
@keyframes floatLetters {
  from { transform: translateY(0) scale(1) rotate(0deg); opacity: 1; }
  to { transform: translateY(-600px) scale(1.3) rotate(360deg); opacity: 0; }
}
@keyframes fadeOut {
  to { opacity: 0; visibility: hidden; display: none; }
}
@keyframes fadeInText {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ================= INTRO ================= */
#intro {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  padding: 0px 8%;
  background: linear-gradient(to right, #fff, #f9f8f6);
  min-height: 80vh;
  overflow: hidden;
}
.intro-content { flex: 1; min-width: 300px; animation: fadeInLeft 1.2s ease; }
.intro-content h1 { font-size: 2.5rem; color: #222; margin-bottom: 10px; }
.highlight { color: #00295f; }
.subtitle { font-size: 1.2rem; color: #555; max-width: 500px; margin-bottom: 25px; line-height: 1.6; }
.intro-buttons { display: flex; gap: 15px; }
.btn { padding: 12px 25px; border-radius: 8px; font-weight: bold; text-decoration: none; font-size: 1rem; transition: all 0.3s ease; }
.gold-btn { background: #00295f; color: white; }
.gold-btn:hover { background: #000; color: white; }
.black-btn { background: black; color: white; }
.black-btn:hover { background: #00295f; color: #000; }
.intro-image { flex: 1; text-align: center; animation: fadeInRight 1.2s ease; }
.intro-image img { width: 85%; max-width: 400px; border-radius: 20px; filter: drop-shadow(0 10px 15px rgba(0,0,0,0.2)); }
/* ===== Animations ===== */
@keyframes fadeInLeft { from { opacity: 0; transform: translateX(-40px); } to { opacity: 1; transform: translateX(0); } }
@keyframes fadeInRight { from { opacity: 0; transform: translateX(40px); } to { opacity: 1; transform: translateX(0); } }
/* Responsive */
@media (max-width: 800px) {
  #intro { flex-direction: column; text-align: center; }
  .intro-content, .intro-image { animation: none; }
  .intro-content h1 { font-size: 2rem; }
  .subtitle { font-size: 1rem; }
  .intro-buttons { justify-content: center; }
}

/* ‚ú® Animation styles */
#tips-list li {
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.6s ease;
}
#tips-list li.visible {
  opacity: 1;
  transform: translateY(0);
}
/* ‚ú® Animation styles */
  
#tips-list li {
  
  opacity: 0;
  
  transform: translateY(20px);
  
  transition: all 0.6s ease;
  
}
  

  
#tips-list li.visible {
  
  opacity: 1;
  
  transform: translateY(0);
  
}

  </style>
  <script>
/* ===== JS to Generate Floating Letters ===== */
document.addEventListener("DOMContentLoaded", () => {
  const letters = ['A','B','C','D','E','F','‡®ï','‡®ñ','‡®ó','‡®ö','‡®ú','‡®§','‡®®','‡®Æ','‡®∏','‡®π','‡®∂','‡®≤'];
  const container = document.querySelector('.letters-container');
  if (container) {
    for (let i = 0; i < 25; i++) {
      const span = document.createElement('span');
      span.classList.add('letter');
      span.textContent = letters[Math.floor(Math.random() * letters.length)];
      span.style.left = Math.random() * 100 + 'vw';
      span.style.bottom = Math.random() * 30 + 'px';
      span.style.animationDuration = 3 + Math.random() * 2 + 's';
      span.style.fontSize = (1 + Math.random() * 1.5) + 'rem';
      container.appendChild(span);
    }
  }

  setTimeout(() => {
    const intro = document.getElementById('intro-screen');
    if (intro) intro.style.display = 'none';
  }, 3000);
});
  </script>
</head>
<body>
  <!-- üåü Floating Letters Intro -->
  <div id="intro-screen">
    <div class="letters-container"></div>
  </div>

  <div class="header">
    <img src="Smartech Educatation Computer Centre3.png" alt="Smartech" class="logo">
    <img src="Typing Boy.png" height="80" alt="Typing Boy">
  </div>

  <nav>
    <ul>
      <li><a href="Home.html">Home</a></li>
     <li id="exerciseLink" class="hidden"><a href="exercises.html">Exercises</a></li>

	 <li><a href="english_tutor.html">Speed Test</a></li>
	 <li><a href="engtutor.html">English Typing Tutor</a></li>
	  <li><a href="pbitutor.html">Punjabi Typing Tutor</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li style="margin-left:auto;">
        <button onclick="document.getElementById('loginModal').style.display='flex'" id="loginBtn">Login</button>
        <button onclick="logout()" id="logoutButton" class="hidden">Logout</button> <button id="fullscreenBtn">Full Screen</button>
      </li>
    </ul>
  </nav>

  <!-- ================== INTRO SECTION ================== -->
  <section id="intro">
    <div class="intro-content">
      <h1>Welcome to <span class="highlight">Smartech Typing Portal</span></h1>
      <p style="font-size:1.1rem; line-height:1.2; color:#444;">
        If you are preparing for government competitive exams such as
        <b>SSC CGL</b>, <b>PSSSB</b>, <b>RRB</b>, or any other typing-based test,
        our carefully designed <b>practice exercises</b> will help you enhance your
        speed and accuracy.
      </p>
      <p style="font-size:1.1rem; line-height:1.2; color:#444;">
        Each passage is structured to reflect the real exam environment ‚Äî helping you
        build the focus, consistency, and confidence needed to perform your best under
        time pressure.
      </p>
      <p style="font-size:1.1rem; line-height:1.2; color:#444;">
        Regular practice on our portal will not only strengthen your typing technique but also sharpen your attention to detail ‚Äî turning your keyboard into your finest exam ally.
      </p>

  <!--    <div class="intro-buttons">
        <a href="exercises.html" class="btn gold-btn" class="hidden">Start Practice</a>
      </div>-->
    </div>
    <div class="intro-image">
      <img src="Typing Boy.png" alt="Typing Boy">
    </div>
  </section>

  <div class="card" style="text-align:center;">
    <h2 id="quoteBox" style="font-style:italic; font-size:24;">Loading motivation...</h2>
  </div>

  <div class="card" id="typing-importance">
    <h2>Importance of Typing Skills</h2>
    <p>Typing is not just pressing keys ‚Äî it‚Äôs the language of today‚Äôs digital world. Every message, document, and idea starts with the ability to type. In an age where communication moves at lightning speed, typing is no longer optional ‚Äî it‚Äôs essential.</p>
    <p>Strong typing skills help you express your thoughts quickly and clearly, boost productivity, and improve accuracy. Whether you are a student, professional, or entrepreneur, typing fluently saves valuable time and builds confidence.</p>
    <p>Typing also strengthens your concentration, patience, and coordination. It‚Äôs not just a skill ‚Äî it‚Äôs a digital superpower that opens doors to faster learning, better communication, and greater opportunities.</p>

    <h3 style="margin-top:20px; color:#00295f;">Tips & Tricks to Improve Typing Speed</h3>
    <ul id="tips-list" style="line-height:1.8; margin-left:20px; list-style-type: square;">
      <li><b>Sit Properly:</b> Keep your back straight, elbows bent at right angles, and wrists relaxed.</li>
      <li><b>Home Row Technique:</b> Place your fingers on <code>A S D F</code> and <code>J K L ;</code> ‚Äî your typing base.</li>
      <li><b>Don‚Äôt Look at the Keyboard:</b> Train your fingers to move by memory ‚Äî this builds real typing speed.</li>
      <li><b>Use All Fingers:</b> Let every finger play its part ‚Äî this distributes effort and improves flow.</li>
      <li><b>Focus on Accuracy First:</b> Speed will naturally increase once accuracy becomes consistent.</li>
      <li><b>Practice Regularly:</b> Just 10 minutes of daily typing builds lasting improvement.</li>
      <li><b>Take Short Breaks:</b> Rest your eyes and fingers to maintain focus and precision.</li>
      <li><b>Challenge Yourself:</b> Type different passages, quotes, or use typing games for variety.</li>
    </ul>

    <p style="margin-top:15px;">Remember ‚Äî the keyboard is your instrument, and your fingers are the musicians. Practice daily, stay consistent, and soon typing will feel as natural as thinking.</p>
  </div>

  <div class="card hidden" id="exerciseContainer">
    <h2>Manage Exercises</h2>

    <div>
      <input type="file" id="exerciseFile">
      <button onclick="loadExercisesFromFile()">Upload Exercises File</button>
    </div>

    <div>
      <input type="text" id="exerciseFileUrl" placeholder="Paste exercises file URL"  value="https://raw.githubusercontent.com/skrajb/speedweb/refs/heads/main/practicetest.txt">
      <button onclick="loadExercisesFromUrl()">Import Exercises from URL</button>
    </div>

    <div style="display:flex;gap:20px;margin-top:15px;">
      <div style="width:50%;">
        <h3>English Exercises</h3>
        <input type="text" id="exerciseTitleEnglish" placeholder="Exercise title">
        <textarea id="exerciseTextEnglish" rows="5" placeholder="Exercise text"></textarea>
        <button onclick="addExercise('English')">Add English Exercise</button>
        <div id="exerciseListEnglish"></div>
      </div>

      <div style="width:50%;">
        <h3>Punjabi Exercises</h3>
        <input type="text" id="exerciseTitlePunjabi" placeholder="Exercise title">
        <textarea id="exerciseTextPunjabi" rows="5" placeholder="Exercise text"></textarea>
        <button onclick="addExercise('Punjabi')">Add Punjabi Exercise</button>
        <div id="exerciseListPunjabi"></div>
      </div>
    </div>

    <br>
    <button class="delete-btn" onclick="deleteAllExercises()" id="deleteAllButton">Delete All</button>
  </div>

  <div id="loginModal">
  <div class="modal-content" style="position:relative;">
    <button onclick="closeLoginModal()" style="position:absolute; top:10px; right:10px; background:none; border:none; font-size:20px; cursor:pointer;">‚ùå</button>
    <h2>Admin Login</h2>
      <input type="text" id="username" placeholder="Username">
      <input type="password" id="password" placeholder="Password">
      <button onclick="verifyCredentials()">Login</button>
      <p id="loginMessage"></p>
    </div>
  </div>

  <script>
  function closeLoginModal() {
  document.getElementById("loginModal").style.display = "none";
}

/* Quotes + UI small behaviors */
const quotes = [
  "Practice is the key to perfection.",
  "Every word you type is a step closer to success.",
  "Consistency turns beginners into champions.",
  "The keyboard is your instrument ‚Äî play it daily."
];
let qIndex = 0;
const quoteBox = document.getElementById("quoteBox");
function showQuote() {
  if (!quoteBox) return;
  quoteBox.style.opacity = 0;
  setTimeout(() => {
    quoteBox.innerHTML = quotes[qIndex];
    quoteBox.style.opacity = 1;
    qIndex = (qIndex + 1) % quotes.length;
  }, 800);
}
showQuote();
setInterval(showQuote, 10000);

/* Persistent data for exercises */
let exercisesEnglish = JSON.parse(localStorage.getItem('exercisesEnglish')) || [];
let exercisesPunjabi = JSON.parse(localStorage.getItem('exercisesPunjabi')) || [];
let isLoggedIn = sessionStorage.getItem('isLoggedIn') === 'true';

  
  
// üé¨ Animate tips one by one on scroll
  
document.addEventListener("DOMContentLoaded", () => {
  
  const listItems = document.querySelectorAll("#tips-list li");
  
  const observer = new IntersectionObserver(entries => {
  
    entries.forEach(entry => {
  
      if (entry.isIntersecting) {
  
        listItems.forEach((item, index) => {
  
          setTimeout(() => {
  
            item.classList.add("visible");
  
          }, index * 300); // 0.3s delay between each item
  
        });
  
        observer.disconnect(); // run once
  
      }
  
    });
  
  }, { threshold: 0.3 });
  

  
  observer.observe(document.querySelector("#tips-list"));
  
});


/* ---- Helpers and rendering (mostly unchanged from your original file) ---- */
function addExercise(lang){
  let title = lang==="English" ? document.getElementById('exerciseTitleEnglish').value : document.getElementById('exerciseTitlePunjabi').value;
  let text = lang==="English" ? document.getElementById('exerciseTextEnglish').value : document.getElementById('exerciseTextPunjabi').value;
  if(!title || !text) return alert("Both fields required");
  let list = lang==="English" ? exercisesEnglish : exercisesPunjabi;
  list.push({title,text});
  localStorage.setItem('exercisesEnglish',JSON.stringify(exercisesEnglish));
  localStorage.setItem('exercisesPunjabi',JSON.stringify(exercisesPunjabi));
  renderExercises(lang);
}

// Escape quotes and symbols to prevent HTML breaking
function escapeHTML(str) {
  return String(str)
    .replace(/&/g, "&amp;")
    .replace(/</g, "&lt;")
    .replace(/>/g, "&gt;")
    .replace(/"/g, "&quot;")
    .replace(/'/g, "&#39;");
}

function renderExercises(lang) {
  const box = lang === "English" ? document.getElementById('exerciseListEnglish') : document.getElementById('exerciseListPunjabi');
  const list = lang === "English" ? exercisesEnglish : exercisesPunjabi;

  if (!box) return;
  box.innerHTML = list
    .map(
      (e, i) => `
      <div class="card">
        <b>${i + 1}. ${escapeHTML(e.title)}</b>
        <p>${escapeHTML((e.text || "").slice(0, 100))}...</p>
        <button class="delete-btn" data-index="${i}">Delete</button>
      </div>`
    )
    .join("");

  // Add event listeners safely
  box.querySelectorAll(".delete-btn").forEach((btn) => {
    btn.addEventListener("click", () => deleteExercise(btn.dataset.index, lang));
  });
}

function deleteExercise(i,lang){
  let list = lang==="English" ? exercisesEnglish : exercisesPunjabi;
  list.splice(i,1);
  localStorage.setItem('exercisesEnglish',JSON.stringify(exercisesEnglish));
  localStorage.setItem('exercisesPunjabi',JSON.stringify(exercisesPunjabi));
  renderExercises(lang);
}

function deleteAllExercises(){
  exercisesEnglish = []; exercisesPunjabi = [];
  // Only clear the exercise keys to avoid removing other localStorage entries
  localStorage.removeItem('exercisesEnglish');
  localStorage.removeItem('exercisesPunjabi');
  renderExercises("English"); renderExercises("Punjabi");
}

/* ----- LOGIN / SESSION STUFF ----- */
/* Your provided Apps Script web app URL (deployed) */
const GOOGLE_APP_URL = "https://script.google.com/macros/s/AKfycbwNAzXXJmvgTQIa54zPkbRkzdTk7dUA5BZ6Mq0ZtTrphsWJptrG47fZdlzTnjcwBv7W5Q/exec";

/* Generate a session id and register login with backend (sheet) */
async function registerLogin(username) {
  try {
    const sessionId = Math.random().toString(36).substring(2, 12);
    localStorage.setItem("sessionId", sessionId);
    localStorage.setItem("username", username);
    // call backend to register session
    await fetch(`${GOOGLE_APP_URL}?action=login&username=${encodeURIComponent(username)}&sessionId=${encodeURIComponent(sessionId)}`);
    // Start periodic checks
    checkSessionLoop();
  } catch (err) {
    console.error("Failed to register login", err);
  }
}

/* Periodically check session status (every 60s) */
let _checkLoopActive = false;
async function checkSessionLoop() {
  if (_checkLoopActive) return;
  _checkLoopActive = true;

  while (sessionStorage.getItem('isLoggedIn') === 'true') {
    try {
      const username = localStorage.getItem("username");
      const sessionId = localStorage.getItem("sessionId");
      if (!username || !sessionId) break;

      const res = await fetch(`${GOOGLE_APP_URL}?action=check&username=${encodeURIComponent(username)}&sessionId=${encodeURIComponent(sessionId)}`);
      const status = await res.text();

      if (status === "LOGOUT" || status === "EXPIRED") {
        alert("Your session has expired or you logged in from another device. You will be logged out now.");
        await performLogoutLocal(false); // false = avoid asking backend again
        break;
      }
    } catch (err) {
      console.error("Session check failed", err);
      // continue anyway; next loop will retry
    }
    // wait 60s before next check
    await new Promise(res => setTimeout(res, 60000));
  }

  _checkLoopActive = false;
}

/* Perform logout locally and optionally inform backend */
async function performLogoutLocal(callBackend = true) {
  const username = localStorage.getItem("username");
  try {
    if (callBackend && username) {
      await fetch(`${GOOGLE_APP_URL}?action=logout&username=${encodeURIComponent(username)}`);
    }
  } catch (err) {
    console.warn("Backend logout failed (network?). Proceeding with local logout.", err);
  }
	document.getElementById('exerciseLink').classList.add('hidden');

  localStorage.removeItem("username");
  localStorage.removeItem("sessionId");
  sessionStorage.removeItem('isLoggedIn');

  // UI updates
  const exerciseContainer = document.getElementById('exerciseContainer');
  const logoutButton = document.getElementById('logoutButton');
  const loginBtn = document.getElementById('loginBtn');

  if (exerciseContainer) exerciseContainer.classList.add('hidden');
  if (logoutButton) logoutButton.classList.add('hidden');
  if (loginBtn) loginBtn.classList.remove('hidden');

  // reload to reset state consistently
  try { alert("You have been logged out."); } catch (e) {}
  location.reload();
}

/* Wrapper called by UI */
async function logout() {
  await performLogoutLocal(true);
}

/* Auto logout after 1 hour inactivity (resets on activity) */
let inactivityTimer;
const AUTO_LOGOUT_MS = 60 * 60 * 1000; // 1 hour

function resetInactivityTimer() {
  clearTimeout(inactivityTimer);
  if (sessionStorage.getItem('isLoggedIn') === 'true') {
    inactivityTimer = setTimeout(async () => {
      alert("You have been logged out due to inactivity.");
      await performLogoutLocal(true);
    }, AUTO_LOGOUT_MS);
  }
}

/* Wire activity events to reset inactivity timer */
["click", "mousemove", "keydown", "scroll", "touchstart"].forEach(evt => {
  document.addEventListener(evt, resetInactivityTimer, { passive: true });
});

/* verifyCredentials uses the existing credential check you had; now it registers with backend */
async function verifyCredentials() {
  const usernameEl = document.getElementById('username');
  const passwordEl = document.getElementById('password');
  const loginMessage = document.getElementById('loginMessage');
  const exerciseContainer = document.getElementById('exerciseContainer');
  const logoutButton = document.getElementById('logoutButton');
  const loginBtn = document.getElementById('loginBtn');
  const loginModal = document.getElementById('loginModal');
  const exerciseLink = document.getElementById('exerciseLink');

  const u = usernameEl.value.trim();
  const p = passwordEl.value.trim();
  if (!u || !p) return alert("Enter username & password!");

  try {
    const res = await fetch(`${GOOGLE_APP_URL}?action=verify&username=${encodeURIComponent(u)}&password=${encodeURIComponent(p)}`);
    const text = await res.text();

    if (text === "VALID") {
      // Mark user as logged in
      sessionStorage.setItem('isLoggedIn', 'true');
      localStorage.setItem('username', u);
      isLoggedIn = true;

      // Close login modal
      if (loginModal) loginModal.style.display = 'none';
      if (logoutButton) logoutButton.classList.remove('hidden');
      if (loginBtn) loginBtn.classList.add('hidden');

      // Only show exercise container for admin
      if (u === "skraj" && p === "5775") {
        if (exerciseContainer) exerciseContainer.classList.remove('hidden');
        if (exerciseLink) exerciseLink.classList.remove('hidden');
        loadExercisesFromUrl(); // load exercises only for admin
      } else {
        if (exerciseContainer) exerciseContainer.classList.add('hidden');
        if (exerciseLink) exerciseLink.classList.add('hidden');
      }

      // Register login with backend
      registerLogin(u);
      resetInactivityTimer();
    } else {
      loginMessage.innerText = "Invalid credentials.";
    }
  } catch (err) {
    console.error(err);
    alert("‚ö†Ô∏è Login failed ‚Äî check network or script URL");
  }
}


/* restore UI state on load if session exists */
window.onload = () => {
  const exerciseContainer = document.getElementById('exerciseContainer');
  const logoutButton = document.getElementById('logoutButton');
  const loginBtn = document.getElementById('loginBtn');
  const exerciseLink = document.getElementById('exerciseLink');

  if (sessionStorage.getItem('isLoggedIn') === 'true') {
    // user is logged in ‚Üí show
    if (exerciseContainer) exerciseContainer.classList.remove('hidden');
    if (logoutButton) logoutButton.classList.remove('hidden');
    if (loginBtn) loginBtn.classList.add('hidden');
    if (exerciseLink) exerciseLink.classList.remove('hidden');
    resetInactivityTimer();
    checkSessionLoop();
  } else {
    // user not logged in ‚Üí hide
    if (exerciseContainer) exerciseContainer.classList.add('hidden');
    if (logoutButton) logoutButton.classList.add('hidden');
    if (loginBtn) loginBtn.classList.remove('hidden');
    if (exerciseLink) exerciseLink.classList.add('hidden');
  }

  renderExercises("English");
  renderExercises("Punjabi");
};


/* ---- load exercises from URL code (keeps your parsing logic) ---- */
async function loadExercisesFromUrl() {
  const url = document.getElementById("exerciseFileUrl").value.trim();
  if (!url) return alert("Please enter a valid file URL!");

  try {
    const response = await fetch(url);
    const text = await response.text();

    // Split the text into lines and process
    const sections = text.split(/###/).filter(Boolean);
    exercisesEnglish = [];
    exercisesPunjabi = [];

    sections.forEach(section => {
      const langMatch = section.match(/(English|Punjabi)/i);
      if (!langMatch) return;
      const lang = langMatch[1].trim();
      const exercises = section.split(/---/).filter(t => t.trim().length > 0);
      for (let i = 0; i < exercises.length; i += 2) {
        const title = exercises[i].trim();
        const content = exercises[i + 1] ? exercises[i + 1].trim() : "";
        if (!title || !content) continue;
        if (lang.toLowerCase() === "english") {
          exercisesEnglish.push({ title, text: content });
        } else if (lang.toLowerCase() === "punjabi") {
          exercisesPunjabi.push({ title, text: content });
        }
      }
    });

    // Save to localStorage and render
    localStorage.setItem('exercisesEnglish', JSON.stringify(exercisesEnglish));
    localStorage.setItem('exercisesPunjabi', JSON.stringify(exercisesPunjabi));
    renderExercises("English");
    renderExercises("Punjabi");
  } catch (err) {
    console.error(err);
    alert("‚ùå Failed to load exercises. Check your URL or file format.");
  }
}

/* Placeholder for a file upload function you referenced earlier (keeps parity) */
function loadExercisesFromFile() {
  const f = document.getElementById('exerciseFile');
  if (!f || !f.files || !f.files[0]) return alert("Select a file first");
  const reader = new FileReader();
  reader.onload = (e) => {
    const text = e.target.result || "";
    // Basic fallback: store entire file as a single English exercise
    exercisesEnglish.push({ title: "Imported", text });
    localStorage.setItem('exercisesEnglish', JSON.stringify(exercisesEnglish));
    renderExercises("English");
  };
  reader.readAsText(f.files[0], 'utf-8');
}
	  const fullscreenBtn = document.getElementById('fullscreenBtn');

fullscreenBtn.addEventListener('click', () => {
  if (!document.fullscreenElement) {
    // Enter full screen
    document.documentElement.requestFullscreen().catch(err => {
      alert(`Error enabling full-screen mode: ${err.message}`);
    });
    fullscreenBtn.textContent = "Exit Full Screen";
  } else {
    // Exit full screen
    document.exitFullscreen();
    fullscreenBtn.textContent = "Full Screen";
  }
});

  </script>
</body>
</html>
